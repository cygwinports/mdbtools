--- origsrc/mdbtools-0.6pre1/configure.in	2004-06-17 21:18:14.000000000 -0500
+++ src/mdbtools-0.6pre1/configure.in	2006-12-24 23:30:35.324750000 -0600
@@ -110,7 +110,6 @@
 fi
 
 AC_SUBST([OPTDIRS])
-AC_CONFIG_FILES([src/Makefile])
 
 
 ##################################################
@@ -176,6 +175,7 @@
 AC_OUTPUT([
 libmdb.pc
 libmdbsql.pc
+src/Makefile
 src/util/Makefile
 src/extras/Makefile
 Makefile include/Makefile
--- origsrc/mdbtools-0.6pre1/doc/Makefile.am	2004-02-08 21:09:53.000000000 -0600
+++ src/mdbtools-0.6pre1/doc/Makefile.am	2006-12-24 23:30:35.324750000 -0600
@@ -34,18 +34,18 @@
 man:	mdb-tables.1 mdb-ver.1 mdb-export.1 mdb-sql.1
 
 mdb-tables.1: mdb-tables.txt
-	- $(TXT2MAN) -P $(PRODUCT) -t $(PRODUCT) -r $(RELEASE) $(srcdir)/$< > $@
+	- $(TXT2MAN) -P $(PRODUCT) -t $(PRODUCT) -r $(RELEASE) $< > $@
 	
 mdb-ver.1: mdb-ver.txt
-	- $(TXT2MAN) -P $(PRODUCT) -t $(PRODUCT) -r $(RELEASE) $(srcdir)/$< > $@
+	- $(TXT2MAN) -P $(PRODUCT) -t $(PRODUCT) -r $(RELEASE) $< > $@
 
 mdb-export.1: mdb-export.txt
-	- $(TXT2MAN) -P $(PRODUCT) -t $(PRODUCT) -r $(RELEASE) $(srcdir)/$< > $@
+	- $(TXT2MAN) -P $(PRODUCT) -t $(PRODUCT) -r $(RELEASE) $< > $@
 
 mdb-schema.1: mdb-schema.txt
-	- $(TXT2MAN) -P $(PRODUCT) -t $(PRODUCT) -r $(RELEASE) $(srcdir)/$< > $@
+	- $(TXT2MAN) -P $(PRODUCT) -t $(PRODUCT) -r $(RELEASE) $< > $@
 
 mdb-sql.1: mdb-sql.txt
-	- $(TXT2MAN) -P $(PRODUCT) -t $(PRODUCT) -r $(RELEASE) $(srcdir)/$< > $@
+	- $(TXT2MAN) -P $(PRODUCT) -t $(PRODUCT) -r $(RELEASE) $< > $@
 
 
--- origsrc/mdbtools-0.6pre1/src/gmdb2/help/C/Makefile.am	2004-02-08 21:09:53.000000000 -0600
+++ src/mdbtools-0.6pre1/src/gmdb2/help/C/Makefile.am	2006-12-24 23:38:35.340375000 -0600
@@ -5,5 +5,5 @@
 lang = C
 omffile = gmdb-C.omf
 entities = legal.xml
-include xmldocs.make
+include $(top_srcdir)/xmldocs.make
 dist-hook: app-dist-hook
--- origsrc/mdbtools-0.6pre1/src/libmdb/Makefile.am	2004-03-05 23:13:27.000000000 -0600
+++ src/mdbtools-0.6pre1/src/libmdb/Makefile.am	2006-12-24 23:30:35.621625000 -0600
@@ -1,4 +1,5 @@
 lib_LTLIBRARIES	=	libmdb.la
 libmdb_la_SOURCES=	catalog.c mem.c file.c kkd.c table.c data.c dump.c backend.c money.c sargs.c index.c like.c write.c stats.c map.c props.c worktable.c options.c iconv.c
+libmdb_la_LDFLAGS = -no-undefined
 AM_CPPFLAGS	=	-I$(top_srcdir)/include $(GLIB_CFLAGS)
 LIBS = $(GLIB_LIBS) -lm
--- origsrc/mdbtools-0.6pre1/src/odbc/Makefile.am	2004-04-13 19:25:56.000000000 -0500
+++ src/mdbtools-0.6pre1/src/odbc/Makefile.am	2006-12-24 23:36:51.543500000 -0600
@@ -9,13 +9,11 @@
 
 bin_PROGRAMS	=	unittest 
 lib_LTLIBRARIES	=	libmdbodbc.la
-AM_CPPFLAGS	=	-I ../../include $(GLIB_CFLAGS) $(ODBC_CFLAGS)
+AM_CPPFLAGS	=	-I $(top_srcdir)/include $(GLIB_CFLAGS) $(ODBC_CFLAGS)
 libmdbodbc_la_SOURCES=	odbc.c connectparams.c
-libmdbodbc_la_LIBADD=	$(patsubst %, $(SQLDIR)/%, \
-				$(patsubst %.c, %.lo, $(SQLSOURCES))) \
-				$(patsubst %, $(MDBDIR)/%, \
-				$(patsubst %.c, %.lo, $(MDBSOURCES)))
-LIBS	=	@LEXLIB@ $(GLIB_LIBS) $(ODBC_LIBS)
+libmdbodbc_la_LDFLAGS=	-no-undefined
+libmdbodbc_la_LIBADD=  ../libmdb/libmdb.la ../sql/libmdbsql.la
+LIBS	=	$(GLIB_LIBS) $(ODBC_LIBS)
 unittest_LDADD	=	libmdbodbc.la ../libmdb/libmdb.la ../sql/libmdbsql.la
 
 ## Need blank statement to avoid compiling odbc.c
--- origsrc/mdbtools-0.6pre1/src/odbc/odbc.c	2006-12-24 23:30:34.246625000 -0600
+++ src/mdbtools-0.6pre1/src/odbc/odbc.c	2006-12-24 23:30:35.621625000 -0600
@@ -18,8 +18,12 @@
  */
 
 #ifdef UNIXODBC
+#ifdef __CYGWIN__
+#include <windows.h>
+#endif
 #include <sql.h>
 #include <sqlext.h>
+#include <sqltypes.h>
 #else
 #include "isql.h"
 #include "isqlext.h"
--- origsrc/mdbtools-0.6pre1/src/odbc/unittest.c	2002-04-08 20:19:26.000000000 -0500
+++ src/mdbtools-0.6pre1/src/odbc/unittest.c	2006-12-24 23:30:35.637250000 -0600
@@ -17,7 +17,9 @@
  * Boston, MA 02111-1307, USA.
  */
 
-/* #include <windows.h> */
+#ifdef __CYGWIN__
+#include <windows.h>
+#endif
 #include <sql.h>
 #include <sqlext.h>
 
--- origsrc/mdbtools-0.6pre1/src/sql/Makefile.am	2004-02-08 21:10:19.000000000 -0600
+++ src/mdbtools-0.6pre1/src/sql/Makefile.am	2006-12-24 23:30:35.637250000 -0600
@@ -1,5 +1,7 @@
 lib_LTLIBRARIES	=	libmdbsql.la
 libmdbsql_la_SOURCES=	mdbsql.c parser.y lexer.l 
+libmdbsql_la_LDFLAGS=	-no-undefined
+libmdbsql_la_LIBADD=	../libmdb/libmdb.la
 EXTRA_DIST = main.c
 DISTCLEANFILES = parser.c parser.h lexer.c
 AM_CPPFLAGS	=	-I$(top_srcdir)/include $(GLIB_CFLAGS)
